(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1084:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),c=n.n(o),u=n(18),l=n.n(u),i=(n(33),n(4)),s=n.n(i),m=n(11),d=n.n(m),f=n(1),p=function(){var e=Object(f.c)(),t=Object(f.c)(),n=Object(f.c)();return{updateFirstName:e,changeFirstName:t,updateLastName:n,changeLastName:Object(f.c)(),firstName:Object(f.e)(e,s.a.name.firstName()),lastName:Object(f.e)(n,s.a.name.lastName())}}(),v=n(3),h=n(5),b=n(7),E=n(6),g=n(8),N=n(9),y=n(14),C=n(21),j=new Map,O=Object(f.d)(new Map),w=O.map(function(e){return Array.from(e.values()).map(function(e){return[Object(y.a)(e),j.get(e.id).Provider]}).map(function(e){var t=Object(N.a)(e,2),n=t[0],a=t[1];return function(e){var t=e.children;return r.a.createElement(n,null,function(e){return r.a.createElement(a,{value:e},t())})}}).map(function(e){return r.a.createElement(e,null)})}),k=Object(f.c)();O.on(k,function(e,t){return e.has(t.id)?e:(j.set(t.id,r.a.createContext(t.getState())),new Map(e.set(t.id,t)))});var S=Object(y.a)(w);O.watch(function(e){console.log(e)});var x=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).renderProp=function(e){return r.a.createElement(C.a,{components:e},function(){return n.props.children})},n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(S,null,this.renderProp)}}]),t}(r.a.Component);function M(e){return r.a.useEffect(function(){k(e)},[e]),r.a.useContext(j.get(e.id)||r.a.createContext(e.getState()))}var I=function(){var e=M(p.firstName);return r.a.createElement("input",{onChange:p.changeFirstName,value:e})},F=function(){var e=M(p.lastName);return r.a.createElement("input",{onChange:p.changeLastName,value:e})};function A(e,t){var n,r;return r=n=function(n){function a(){var t,n;Object(v.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(b.a)(this,(t=Object(E.a)(a)).call.apply(t,[this].concat(o)))).state={currentState:e.getState()},n._unsubscribe=null,n._hasUnmounted=!1,n}return Object(g.a)(a,n),Object(h.a)(a,[{key:"componentDidMount",value:function(){this.subscribe()}},{key:"componentWillUnmount",value:function(){this.unsubscribe(),this._hasUnmounted=!0}},{key:"subscribe",value:function(){var t=this,n=e.subscribe(function(e){t._hasUnmounted||t.setState(function(t){return e===t.currentState?null:{currentState:e}})});this._unsubscribe=n}},{key:"unsubscribe",value:function(){"function"===typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null}},{key:"render",value:function(){return t(this.props,this.state.currentState)}}]),a}(a.Component),n.displayName="".concat(e.shortName,".RenderComponent"),r}var L=A(p.firstName,function(e,t){return r.a.createElement("input",{onChange:p.changeFirstName,value:t})}),_=A(p.lastName,function(e,t){return r.a.createElement("input",{onChange:p.changeLastName,value:t})}),P=new Set,$=function(){P.add(setInterval(function(){p.updateFirstName(s.a.name.firstName()),p.updateLastName(s.a.name.lastName())},150)),P.add(setInterval(function(){p.updateFirstName("empty"),p.updateLastName("empty")},500))},B=function(){return P.forEach(clearInterval)},H=Array.from({length:50}).map(function(){return d()()});var U=n(2),W=n.n(U),J=new WeakMap;function D(e,t){J.set(e,t)}function R(e){var t=J.get(e);return W()(t,'You need to bind a model to your component "'.concat(function(e){return e.displayName||e.name||"Component"}(e),'" (using bindModel)')),t}function T(e,t,n){var a=function(a){var o=a.children,c=a.disable,u=a.options,l=c?void 0:t(u||n);return r.a.createElement(e.Provider,{value:l},o)};return D(a,{modelFactory:t,ComponentContext:e}),a}var Y=function(e,t){return t},q=new Set;function z(e){var t=Object(a.useState)(e.getState),n=Object(N.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)(function(){return e.watch(o)},[e]),r}var G=Array.from({length:50}).map(function(){return d()()});function K(){var e=function(e,t){W()("function"===typeof e,"useComponentModel expects a component");var n=R(e),r=n.modelFactory,o=n.ComponentContext,c=(t?R(t):{}).ComponentContext;return Object(a.useContext)(c||o)||Object(a.useMemo)(r)}(K),t=e.setFirstName,n=e.setLastName,o=e.$firstName,c=e.$lastName,u=e.addIntervals,l=e.stopAllIntervals,i=z(o),s=z(c);return r.a.createElement(r.a.StrictMode,null,r.a.createElement("div",{className:"App"},r.a.createElement("button",{onClick:l},"stop all intervals"),r.a.createElement("button",{onClick:u},"add intervals"),r.a.createElement("h1",null,"Hello Hooks"),G.map(function(e){return r.a.createElement("div",{key:e},r.a.createElement("input",{onChange:t,value:i}),r.a.createElement("input",{onChange:n,value:s}))}),r.a.createElement("h2",null,"Start editing to see some magic happen!")))}!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.createContext();W()("function"===typeof e&&"function"===typeof t&&n&&n.Provider&&n.Consumer,"bindModel expects a component and a model factory (optionally a context)"),D(e,{modelFactory:t,ComponentContext:n}),e.Consumer=n.Consumer,e.Provider=T(n,t)}(K,function(){var e=Object(f.d)(s.a.name.firstName()),t=Object(f.d)(s.a.name.lastName()),n=Object(f.c)(),a=Object(f.c)();return e.on(n,Y),t.on(a,Y),{setFirstName:n,setLastName:a,$firstName:e,$lastName:t,addIntervals:function(){console.log("addIntervals"),q.add(setInterval(function(){n(s.a.name.firstName()),a(s.a.name.lastName())},15)),q.add(setInterval(function(){n("empty"),a("empty")},50))},stopAllIntervals:function(){return q.forEach(clearInterval)}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=l.a.parse(window.location.search);console.log(a),"context"in Q?c.a.render(a.createElement(a.ConcurrentMode,null,a.createElement(function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null,r.a.createElement("div",{className:"App"},r.a.createElement("button",{onClick:B},"stop intervals"),r.a.createElement("button",{onClick:$},"start intervals"),r.a.createElement("h1",null,"Hello Context"),H.map(function(e){return r.a.createElement("div",{key:e},r.a.createElement(I,null),r.a.createElement(F,null))}),r.a.createElement("h2",null,"Start editing to see some magic happen!"))))},null)),document.getElementById("root")):"hooks"in Q?c.a.render(a.createElement(a.ConcurrentMode,null,a.createElement(K,null)),document.getElementById("root")):c.a.render(a.createElement(a.ConcurrentMode,null,a.createElement(function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement("div",{className:"App"},r.a.createElement("button",{onClick:B},"pause"),r.a.createElement("button",{onClick:$},"play"),r.a.createElement("h1",null,"Hello Traditional"),H.map(function(e){return r.a.createElement("div",{key:e},r.a.createElement(L,null),r.a.createElement(_,null))}),r.a.createElement("h2",null,"Start editing to see some magic happen!")))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},22:function(e,t,n){e.exports=n(1084)},33:function(e,t,n){}},[[22,2,1]]]);
//# sourceMappingURL=main.c44d803a.chunk.js.map